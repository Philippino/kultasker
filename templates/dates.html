{% extends 'base.html' %}
{% load date_extras %}

{% block title %} Даты обходов {% endblock %}

{% block chapter %}
{% endblock%}

{% block content %}
<body>
<ol class="breadcrumb">
  	<li><a href='/checks/'>Обходы</a></li>
  	<li class='active'>{{ check }}</li>
</ol>
<!-- кнопка нового обхода по выбранному шаблону -->
<form id='new_check_form' action='/checks/{{check.id}}/dates/new/' method='POST'>{% csrf_token %}
<p><strong><input class="btn btn-primary" type = 'submit' value='Обойти'></strong>
<a class="btn btn-default" href = '/checks/{{ check.id }}/tasks/'>Список заданий</a></p>
</form>
<form name = 'Form1' method = 'GET' target ='_top'>
	{% csrf_token %}
	<table class = 'table table-hover'>
		<tr>
			<td>Дата</td>
			<td>Статус</td>
		</tr>
		<!-- даты обходов -->
		{% for date in dates %}
			<tr>
				<td>
					<button type="button" class="btn btn-link" onclick="location.href='/checks/{{ date.check_id }}/{{ date.id }}/results/'">
						{{ date.date|format }}
					</button>
					</td>
				<td>
					{% if date.status == True %}
							<span class="glyphicon glyphicon-ok"></span>
						{% else %}
							<span class="glyphicon glyphicon-remove"></span>
					{% endif %}
				</td>
			</tr>		
		{% endfor %}
	</table>
	
</form>
<!-- Новый дата обхода -->
<!--
	<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" >
 		<div class="modal-dialog">
    		<div class="modal-content">
    			<form id='new_check_form' action='' method='POST'>{% csrf_token %}
      			<div class="modal-header">
        			<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        			<h4 class="modal-title" id="myModalLabel">Новый обход</h4>
      			</div>
      			<div class="modal-body">
      				Вы хотите создать новый обход c датой<a id='date'></a>.
      				<script>
      				function load_time(){   				
      				var date = new Date();
      				var h = date.getHours();
					var m = date.getMinutes();
      				var d = date.getDate();
					var mn = date.getMonth();
					var y = date.getFullYear();
					if (m<10) m = '0' + m;
      				document.getElementById('date').innerHTML = h+':'+m+' '+d+'-'+mn+'-'+y;
      				}
      				</script>
					Продолжить?
      			</div>
      			<div class="modal-footer">
      				<input type= 'submit' class='btn btn-primary' value = 'Создать'>
        			<button type="button" class="btn btn-default" data-dismiss="modal">Отмена</button>
      			</div>		
    			</form>
    		</div>
  		</div>
	</div>
-->
</body>

{% endblock %}