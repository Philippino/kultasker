{% extends 'base.html' %}

{% block title %} Обходы {% endblock %}

{% block chapter %}
	<li class="active"><a onclick="location.href='/checks/'" class='btn btn-link'>Обходы</a></li>
{% endblock %}

{% block content %}
<body>
<!-- форма вывода таблицы шаблонов обходов -->
<form name = 'form_checks' method = 'GET' target ='_top'>{% csrf_token %} 
	<!-- кнопка добавления нового шаблона обхода -->
	<p><a onclick="location.href='/checks/new/'" class="btn btn-primary"><strong>Новый обход</strong></a></p>
	<!--таблица шаблонов обходов-->
	<table class = 'table table-hover'>
		<tr>
			<td>Обход</td>
			<td></td>
		</tr>
		<!-- Вывод элементов таблицы check-->
		{% for check in checks %}
		<tr>
			<td>
				<!-- название шаблона обхода--><!-- ссылка на даты, ссылающиеся на обход-->
				<button type="button" class="btn btn-link" onclick="location.href='/checks/{{ check.id }}/dates'">{{ check.name }}</button>
			</td> 
			<td>
			<!-- кнопка действий -->
			<div class="btn-group">
				<!-- основное действие -->
  				<button type="button" class="btn btn-default">Обойти</button> 
  				<!-- меню дополнительных действий -->
  				<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
    			<span class="caret"></span>
  				</button>
  				<ul class="dropdown-menu">
    				<li><a href='/checks/{{ check.id }}/tasks/'>Задания</a></li>
    				<li><a href='/checks/{{ check.id }}/dates/'>Показать историю</a></li>
    				<li><a href="#">Редактировать</a></li>
    				<li class="divider"></li>
    				<li><a href="#">Удалить</a></li>
  				</ul>
			</div>
			</td>
		</tr>		
		{% endfor %}
	</table>
</form>

<script language= 'text/javascript'>
	<!-- скрипт обращения к датам обхода -->
	function view_dates()
	{	
		document.form_checks.action = '/checks/{{ check.id }}/dates';
		document.form_checks.submit();
		return true;
	}
</script>
</body>
{% endblock %}